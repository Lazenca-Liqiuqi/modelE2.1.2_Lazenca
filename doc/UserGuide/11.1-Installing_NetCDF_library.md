# Installing NetCDF library in your computer / 在您的计算机上安装NetCDF库

## Overview / 概述

On Linux and Mac OS X machines typically you can install NetCDF from the main software repositories (with "yum" or similar package manage on Linux or MacPorts on Mac). You can try it, but we don't recommend this approach. The problem is that for a library to be compatible with your Fortran compiler it has to be compiled with the same compiler and with the same flags you will be using and that may be not the case when you get a precompiled library from a repository. If you install NetCDF with MacPorts, at least make sure that you have installed the Fortran compiler before you start the installation of NetCDF and that MacPorts recognizes it as a default compiler.
在Linux和Mac OS X机器上，通常您可以从主软件仓库安装NetCDF（在Linux上使用"yum"或类似的包管理器，在Mac上使用MacPorts）。您可以尝试这种方法，但我们不推荐这种方式。问题是，为了使库与您的Fortran编译器兼容，必须使用您将要使用的相同编译器和相同标志来编译它，而当您从仓库获取预编译库时可能不是这种情况。如果您使用MacPorts安装NetCDF，至少请确保在开始安装NetCDF之前已经安装了Fortran编译器，并且MacPorts将其识别为默认编译器。

The safer way, though, is to install NetCDF from the source code. You can download the gzipped tar file with the source code from:
然而，更安全的方法是从源代码安装NetCDF。您可以从以下网址下载包含源代码的gzip压缩tar文件：

```text
http://www.unidata.ucar.edu/downloads/netcdf/index.jsp
```

## Installation steps / 安装步骤

### 1. Extract the source code / 解压源代码

To install it do the following. Untar the downloaded file and enter the directory with downloaded code:
安装步骤如下。解压下载的文件并进入包含下载代码的目录：

```bash
tar -xzf netcdf-3.6.3.tar.gz
cd netcdf-3.6.3
```

### 2. Choose installation directory / 选择安装目录

Choose a directory where you want to install NetCDF, say "/opt/netcdf/3.6.3" (make sure that directory above it exists and is writable to you). Make sure that Fortran compiler is installed and is functional. Now, start the installation process.
选择您想要安装NetCDF的目录，比如"/opt/netcdf/3.6.3"（确保其上层的目录存在并且您有写权限）。确保Fortran编译器已安装且功能正常。现在，开始安装过程。

### 3. Specify Fortran compiler / 指定Fortran编译器

Inform the system which Fortran compiler you are going to use:
告知系统您将要使用的Fortran编译器：

```bash
export FC=gfortran
```

If you are using a different compiler, replace "gfortran" with the appropriate compiler command (for example "ifort" for Intel compiler).
如果您使用不同的编译器，请将"gfortran"替换为相应的编译器命令（例如，Intel编译器使用"ifort"）。

### 4. Configure the build / 配置构建

Run the configure script with the installation prefix:
使用安装前缀运行配置脚本：

```bash
./configure --prefix=/opt/netcdf/3.6.3
```

If you want to install NetCDF in a different directory, replace the path accordingly.
如果您想将NetCDF安装到不同的目录，请相应地替换路径。

### 5. Compile and install / 编译和安装

Compile and install NetCDF:
编译和安装NetCDF：

```bash
make
make check
make install
```

The `make check` step is optional but recommended to verify that the installation is working correctly.
`make check`步骤是可选的，但建议执行以验证安装是否正常工作。

### 6. Set up environment / 设置环境

After installation, you need to set up your environment to use NetCDF:
安装后，您需要设置环境以使用NetCDF：

```bash
export NETCDFHOME=/opt/netcdf/3.6.3
export PATH=$NETCDFHOME/bin:$PATH
export LD_LIBRARY_PATH=$NETCDFHOME/lib:$LD_LIBRARY_PATH
```

You may want to add these lines to your `~/.bashrc` or `~/.profile` file to make them permanent.
您可能需要将这些行添加到您的`~/.bashrc`或`~/.profile`文件中以使其永久生效。

## Verification / 验证

To verify that NetCDF is installed correctly, you can run:
要验证NetCDF是否正确安装，您可以运行：

```bash
nc-config --all
```

This should display information about your NetCDF installation, including the version, installation directory, and compiler flags.
这应该显示有关NetCDF安装的信息，包括版本、安装目录和编译器标志。

## Troubleshooting / 故障排除

### Common issues / 常见问题

1. **Compiler not found / 找不到编译器**
   - Make sure the Fortran compiler is in your PATH / 确保Fortran编译器在您的PATH中
   - Try `which gfortran` or `which ifort` to verify / 尝试`which gfortran`或`which ifort`来验证

2. **Permission denied / 权限被拒绝**
   - Make sure you have write permissions to the installation directory / 确保您对安装目录有写权限
   - Consider using `sudo` for system-wide installation / 考虑使用`sudo`进行系统级安装

3. **Compilation errors / 编译错误**
   - Check that you have all required dependencies installed / 检查是否安装了所有必需的依赖项
   - Make sure the compiler versions are compatible / 确保编译器版本兼容

### Getting help / 获取帮助

If you encounter problems during installation, you can:
如果您在安装过程中遇到问题，可以：

- Check the NetCDF documentation at [Unidata website](https://www.unidata.ucar.edu/software/netcdf/docs/) / 查看[Unidata网站](https://www.unidata.ucar.edu/software/netcdf/docs/)上的NetCDF文档
- Search the NetCDF support forums / 搜索NetCDF支持论坛
- Consult your system administrator / 咨询您的系统管理员
